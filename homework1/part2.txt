xw = [0
0
0
254.8
254.8
254.8]
yw = [145.6
0
0
145.6
0
0]
zw = [0
36.4
182
0
36.4
182]
u = [38.3403
54.402
27.451
255.0372
244.4201
263.7486]
v = [57.5327
161.7976
258.4401
57.2604
162.6143
261.4347]


A = zeros(12,12)


for i=1:6
        A(2*i-1,:) = [-xw(i) -yw(i) -zw(i) -1 0 0 0 0 u(i)*xw(i) u(i)*yw(i) u(i)*zw(i) u(i)] ;
        A(2*i,:) = [0 0 0 0 -xw(i) -yw(i) -zw(i) -1 v(i)*xw(i) v(i)*yw(i) v(i)*zw(i) v(i)] ;
end


[U,S,V] = svd(A)

unknown_parameters = V(:,end); % choose the smallest eigenvector
P_transpoze = reshape(unknown_parameters, [4,3]);
P = P_transpoze';


function [K,R,t] = QR_Decomposition(P)
    H = P(:,1:3);
    h = P(:,end);

    [R_trans, K_inv] = qr(inv(H));

    R = R_trans';
    K = inv(K_inv);

    % Calculating camera position center
    C = -inv(H)*h
    t = -R*C;
end


xs = [90.7916
94.8644
224.633
221.2624
]
ys = [80.7388
208.1198
197.5867
90.008]
xd = [88.6944
86.48
225.9884
225.4348
]
yd = [92.4309
200.9375
206.8426
83.3887
]
A = zeros(8,9)

for i=1:4

A(2*i-1,:)=[xs(i)  ys(i)  1   0    0    0   -xd(i)*xs(i)   -xd(i)*ys(i)   -xd(i)]
A(2*i,:)=[0    0    0	xs(i)  ys(i)  1   -yd(i)*xs(i)   -yd(i)*ys(i)   -yd(i)]


end


[U,S,V] = svd(A);


H=V(:,end);
H=reshape(H,3,3);
H = H'

---------------

x = [[90.6089 94.9646 224.275 221.5526]
	[88.4095 86.4602 226.6635 226.6635]]'

y = [[80.9446 208.3494 197.7323 89.6561]
[92.1426 200.8564 207.3043 82.5458]]'



x(:,0)



--------------------------------------------------
xw = [0
22.225
44.45
66.675
88.9
111.125
133.35
155.575
177.8
200.025
0
22.225
44.45
66.675
88.9
111.125
133.35
155.575
177.8
200.025
0
22.225
44.45
66.675
88.9
111.125
133.35
155.575
177.8
200.025
0
22.225
44.45
66.675
88.9
111.125
133.35
155.575
177.8
200.025
0
22.225
44.45
66.675
88.9
111.125
133.35
155.575
177.8
200.025
0
22.225
44.45
66.675
88.9
111.125
133.35
155.575
177.8
200.025
0
22.225
44.45
66.675
88.9
111.125
133.35
155.575
177.8
200.025
0
22.225
44.45
66.675
88.9
111.125
133.35
155.575
177.8
200.025]
yw = [0
0
0
0
0
0
0
0
0
0
22.225
22.225
22.225
22.225
22.225
22.225
22.225
22.225
22.225
22.225
44.45
44.45
44.45
44.45
44.45
44.45
44.45
44.45
44.45
44.45
66.675
66.675
66.675
66.675
66.675
66.675
66.675
66.675
66.675
66.675
88.9
88.9
88.9
88.9
88.9
88.9
88.9
88.9
88.9
88.9
111.125
111.125
111.125
111.125
111.125
111.125
111.125
111.125
111.125
111.125
133.35
133.35
133.35
133.35
133.35
133.35
133.35
133.35
133.35
133.35
155.575
155.575
155.575
155.575
155.575
155.575
155.575
155.575
155.575
155.575]
zw = [0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0]
u = [81.9647
97.8188
114.1093
130.1089
146.3993
162.8352
179.2712
196.1434
212.7248
230.0334
81.8193
97.8188
113.9638
129.818
146.6902
162.9807
179.7075
196.2889
212.8702
230.0334
81.9647
97.9643
114.1093
130.1089
146.8357
162.9807
179.7075
196.5798
213.3066
230.1789
81.8193
98.1097
113.9638
129.818
147.1266
163.2716
179.9984
196.5798
213.1611
230.1789
81.9647
98.1097
113.9638
130.3998
146.9811
163.1261
179.9984
197.0161
213.8884
230.7607
82.1102
98.1097
113.9638
130.3998
147.1266
163.417
180.1439
196.8707
213.8884
230.9061
81.9647
97.9643
114.4002
130.8361
147.1266
163.8534
180.2893
196.8707
214.1793
231.197
82.1102
98.4006
114.8366
130.6907
147.272
163.8534
180.2893
197.0161
214.3247
231.197]
v = [88.6151
88.6151
88.3242
87.5969
86.8697
86.8697
86.5788
86.1424
85.7061
85.1243
104.4692
104.4692
104.1783
103.5965
103.1601
103.3056
102.7238
102.142
101.9965
101.8511
120.7596
120.4687
120.3233
120.0324
119.7415
119.3051
119.3051
119.0142
118.5779
118.1415
137.1956
136.9047
136.4683
135.8865
135.8865
136.032
135.7411
135.3047
135.4502
135.1593
153.1951
153.0497
152.9042
152.6133
152.4679
152.3224
152.3224
152.3224
152.177
152.0315
169.4856
169.1947
169.3401
169.3401
169.3401
169.1947
169.4856
169.3401
169.0492
169.1947
186.3579
186.2124
186.067
185.7761
186.067
185.4852
185.6306
185.9215
185.9215
185.9215
202.0665
202.3574
202.3574
202.3574
202.0665
202.5029
202.0665
202.7938
202.7938
202.9392]

A = zeros(160,12)

for i=1:80
        A(2*i-1,:) = [-xw(i) -yw(i) -zw(i) -1 0 0 0 0 u(i)*xw(i) u(i)*yw(i) u(i)*zw(i) u(i)] ;
        A(2*i,:) = [0 0 0 0 -xw(i) -yw(i) -zw(i) -1 v(i)*xw(i) v(i)*yw(i) v(i)*zw(i) v(i)] ;
end


[U,S,V] = svd(A)

unknown_parameters = V(:,end); % choose the smallest eigenvector
P_transpoze = reshape(unknown_parameters, [4,3]);
P = P_transpoze';

